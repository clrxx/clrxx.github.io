(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19438c23"],{"201f":function(e,t,r){"use strict";var a=r("cbd7"),i=r.n(a);i.a},"2fd5":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"promotion-store"},[r("div",{staticClass:"account-puc"},[e.showOpts?r("div",{staticClass:"promotion-store-add"},[r("el-form",{ref:"ruleForm",staticClass:"form-label-12",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"网吧名称",prop:"name"}},[r("el-input",{attrs:{type:"text",size:"small"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"网吧IP",prop:"ip"}},[r("el-input",{attrs:{type:"text",size:"small"},model:{value:e.ruleForm.ip,callback:function(t){e.$set(e.ruleForm,"ip",t)},expression:"ruleForm.ip"}})],1),r("el-form-item",{attrs:{label:"结束时间",prop:"time"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",size:"small"},on:{change:e.datePickerChange},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1):e._e(),r("div",{staticClass:"promotion-store-table"},[r("el-table",{attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"name",label:"网吧名称"}}),r("el-table-column",{attrs:{prop:"ip",label:"网吧IP"}}),r("el-table-column",{attrs:{prop:"expirationTimeStr",label:"结束时间"}}),e.showOpts?r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.tableEdit(t.$index,t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.tableDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,1713077445)}):e._e()],1),e.tableData.length>0?r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{total:e.pageTotal,"page-size":e.pageSize,"current-page":e.pageCurrent,background:"",layout:"prev, pager, next"},on:{"current-change":e.pageChange}})],1):e._e()],1)])])},i=[],n=(r("7f7f"),{data:function(){var e=function(e,t,r){var a=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;""===t?r(new Error("请输入网吧ip")):a.test(t)?r():r(new Error("请正确输入网吧ip"))};return{tableData:[],showOpts:!1,isAddIp:1,ruleForm:{name:"",ip:"",time:""},rules:{name:[{required:!0,message:"请输入网吧名称",trigger:"blur"}],ip:[{required:!0,validator:e,trigger:"blur"}],time:[{required:!0,message:"请选择结束时间",trigger:"blur"}]},pageTotal:10,pageSize:10,pageCurrent:1}},created:function(){var e=this;this.$api.post("GetRoles").then(function(t){for(var r=t.obj,a=0;a<r.length;a++)if("专区"==r[a])return e.showOpts=!0,!1}),this.cAjax()},methods:{cAjax:function(){var e=this;this.$api.post("IPPage",{itemCount:this.pageSize,pageIndex:this.pageCurrent-1}).then(function(t){e.tableData=t.obj.obj,e.pageTotal=t.obj.allItemCount})},datePickerChange:function(e){this.ruleForm.time=this.$moment(e).format("YYYY-MM-DD HH:mm:ss")},submitForm:function(e){var t=this;this.$refs[e].validate(function(r){r&&(1==t.isAddIp?t.$api.post("AddIP",{ip:t.ruleForm.ip,name:t.ruleForm.name,expirationTime:t.ruleForm.time}).then(function(r){t.cAjax(),t.$refs[e].resetFields()}):t.$api.post("UpdateIP",{id:t.ipId,ip:t.ruleForm.ip,name:t.ruleForm.name,expirationTime:t.ruleForm.time}).then(function(r){t.cAjax(),t.isAddIp=1,t.$refs[e].resetFields()}))})},tableEdit:function(e,t){this.isAddIp=2,this.ipId=t.id,this.ruleForm.ip=t.ip,this.ruleForm.name=t.name,this.ruleForm.time=t.expirationTimeStr},tableDelete:function(e,t){var r=this;this.$api.post("RemoveIP",t.id).then(function(e){r.$notify({title:"温馨提示",message:"ip删除成功"}),r.pageCurrent=1,r.cAjax()})},pageChange:function(e){this.pageCurrent=e,this.cAjax()}}}),o=n,l=(r("201f"),r("2877")),s=Object(l["a"])(o,a,i,!1,null,"08c3eefa",null);t["default"]=s.exports},cbd7:function(e,t,r){}}]);